<!DOCTYPE html>
  <html lang="en">
  
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Import CSS and Assets -->
    <link rel="icon" href="../assets/favicon.png">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">
    <!-- Import Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" integrity="sha512-8Vtie9oRR62i7vkmVUISvuwOeipGv8Jd+Sur/ORKDD5JiLgTGeBSkI3ISOhc730VGvA5VVQPwKIKlmi+zMZ71w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" integrity="sha512-6/gTF62BJ06BajySRzTm7i8N2ZZ6StspU9uVWDdoBiuuNu5rs1a8VwiJ7skCz2BcvhpipLKfFerXkuzs+npeKA==" crossorigin="anonymous" referrerpolicy="no-referrer" />  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" integrity="sha512-bSncow0ApIhONbz+pNI52n0trz5fMWbgteHsonaPk42JbunIeM9ee+zTYAUP1eLPky5wP0XZ7MSLAPxKkwnlzw==" crossorigin="anonymous" referrerpolicy="no-referrer" />  <!-- Import manifest.json -->
    <!-- Make twitter:... embed -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@invalidlenni" />
    <meta name="twitter:title" content="InvalidLenni" />
    <meta name="twitter:description" content="Just a CPS Clicktest." />
    <meta name="twitter:image" content="https://cps-clicktest.vercel.app/assets/favicon.png" />
    <!-- Make og:... embed -->
    <meta content="CPS Clicktest" property="og:title" />
    <meta content="Just a Clicktest" property="og:description" />
    <meta content="https://cps-clicktest.vercel.app/" property="og:url" />
    <meta content="assets/favicon.png" property="og:image" />
    <meta content="#43B581" data-react-helmet="true" name="theme-color" />  
    <title>CPS Clicktest</title> 
  </head>
</head>
<body>
  <center><h1 style="color: white;"></h1></center>
  <div id="content">
    Timer: <span id="timer"></span><br/>
    Score: <span id="score"></span><br/>
    Clicks/s: <span id="clicks"></span>
  </div>
  <br>
  <div id="clickarea">
    <center><input id="durationInP" type="number" required placeholder="Enter the duration." min="10"></center>
    <button id="start">I'm ready!</button>
  </div>
</body>
<br>
<br>
<hr>
<script>
  
  var score; 
var startTime; 
var ended = true; 
var durationInP = document.getElementById("durationInP");
var duration = durationInP;
var timerTxt = document.getElementById("timer");
var scoreTxt = document.getElementById("score");
var clicksTxt = document.getElementById("clicks");
var startBtn = document.getElementById("start");
var clickArea = document.getElementById("clickarea");
var show = function(elem) {
  elem.style.display = 'inline';
};
var hide = function(elem) {
  elem.style.display = 'none';
};
function startGame() {
  hide(startBtn); 
  hide(durationInP)
  score = -1;
  ended = false;
  startTime = new Date().getTime();
  var timerId = setInterval(function() {
    var total = (new Date().getTime() - startTime) / 1000;
    console.log(total)
    if (total < duration) {
      timerTxt.textContent = total.toFixed(3);
      clicksTxt.textContent = (score / total).toFixed(2);
    } else {
      ended = true;
      clearInterval(timerId);
      endGame();
    }
  }, 1);
}

function endGame() {
var clicsBySeconds = (score / duration).toFixed(2);
timerTxt.textContent = duration.toFixed(3);
clicksTxt.textContent = clicsBySeconds;
show(startBtn);
show(durationInP)
setTimeout(function() {
  alert('You made ' + score + ' clicks in ' + duration + 
  ' seconds. It is ' + clicsBySeconds + 
  ' clicks by seconds. Try again!');
}, 10);
}
startBtn.addEventListener("click", function(e) {
startGame();
});
clickArea.addEventListener("click", function(e) {
if (!ended) {
  score++;
  scoreTxt.textContent = score;
}
});
 
</script>
<footer class="mastfoot mb-auto">
  <div class="container-fluid mb-auto">
      <div class="">
          <div class="">    
            <p style="position:static; text-align: center; padding-bottom: 10%; font-size: 19px; margin: 0px; padding: 0px;"><a href="https://cps-clicktest.vercel.app/"
                      style="text-decoration: none; color: white;">Made with ðŸ’– by</a></br>InvalidLenni Â©
                  2021 - <script>document.write((new Date()).getFullYear()) </script>. All<br>
                  rights reserved. Source code available at <a href="https://github.com/InvalidLenni/invalidlenni.github.io/">Github</a> and the website will be hosted by <a href="https://vercel.app/">Vercel</a>.</br></p>
      </div>
    </div>
  </div>
</div>
</footer>
<script src="scripts/cps.js"></script>
<script>
  if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./scripts/sw.js')
      })
    }
    window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault()
    })

</script> 
</html>

